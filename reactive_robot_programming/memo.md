# 雑記

## 最新性の保証について
現在、同じValveは同時刻に1つまでしか走らない。
これにより、Tap内の値の更新時には、必ずある意味でより新しい値となる。

Tapの値の新しさを定義しようとしたが、上手くできなかった...

## Tapへの書き込みについて
ValveExecutor::run中は、あるTapに書き込む者がただ1つであるため、上の保証ができている。
(valve関数の引数で、Inletを右辺値参照でしかとらないことで保証している)
デバッグなどで複数人が書き込み始めると、上の保証はできなくなると思う。

が、複数人が読み書きすること自体は問題ない。ちゃんと排他制御している。

## 複数スレッドでの実行について
現在のValveExecutorは酷い雑実装となっている。

まだValveExecutorがどうあるべきか見えてないのがある。

ValveContainerみたいな型を作り、ValveExecutorをスケジューラに専念させるべきか。